import discord
import os
from keep_alive import keep_alive
from discord import app_commands

client = discord.Client(intents=discord.Intents.default())
tree = app_commands.CommandTree(client)

@client.event
async def on_ready():
    print('ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ')
 # ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’è¨­å®š
    activity = discord.Activity(name='ç–¾é¢¨ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼', type=discord.ActivityType.competing)
    await client.change_presence(status=discord.Status.online, activity=activity)

    # ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’åŒæœŸ
    await tree.sync()
# @client.event
# async def on_message(message):
 #   emoji ="ğŸ‘"
  #  await message.add_reaction(emoji)
# ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰
@tree.command(name='membercount', description='ã‚µãƒ¼ãƒãƒ¼ã®äººæ•°ã‚’è¡¨ç¤ºã—ã¾ã™') 
async def on_message(message):
    # message ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ guild ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—
    guild = message.guild 
    # ãƒ¦ãƒ¼ã‚¶ã¨BOTã‚’åŒºåˆ¥ã—ãªã„å ´åˆ
    member_count = guild.member_count
    await message.response.send_message(f'ä»Šã®äººæ•°ã¯{member_count}ã§ã™')

@client.event
async def on_message(call_message):
    if call_message.author != client.user:
        if client.user in call_message.mentions: # è©±ã—ã‹ã‘ã‚‰ã‚ŒãŸã‹ã®åˆ¤å®š
            reply = f'{call_message.author.mention} å‘¼ã³ã¾ã—ãŸã‹ï¼Ÿ' # è¿”ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä½œæˆ
            await call_message.channel.send(reply) # è¿”ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
        
@client.event
async def on_message(hello_message):
    if hello_message.author != client.user:
        if hello_message.content == "ã“ã‚“ã«ã¡ã¯ï¼": # è©±ã—ã‹ã‘ã‚‰ã‚ŒãŸã‹ã®åˆ¤å®š
            await hello_message.channel.send('ã“ã‚“ã«ã¡ã¯ï¼') # è¿”ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡


TOKEN = os.getenv("DISCORD_TOKEN")
# Web ã‚µãƒ¼ãƒã®ç«‹ã¡ä¸Šã’
keep_alive()
client.run(TOKEN)
